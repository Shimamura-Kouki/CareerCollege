# 2023年度 後期 期末試験

試験の回答は、以下の通りにすること。

- １問あたり１ファイルに記述。ファイル名は「問題番号.php(例: 1.php)」とする。拡張子は.phpであること
- 文字コードはUTF-8にすること

試験の注意事項は以下の通り

- 試験なので「周囲との相談」「他人の答案の覗き見」は不許可
- ネット等を使って調べるのは許可
- コードやSQLを勉強用サーバ(dev2.m-fr.net)で確認するのは推奨
- いずれの問題も「書いてある点数(記載がない場合は10点)」を満点とし、問題があったら適宜減点する

提出方法はテストの終了時に告知します。  
「テスト当日に休んだ」「補習」などの場合は、教務経由で提出をしてください。  


## (問1) 現在日付

プログラムを実行した瞬間の現在時刻(年月日時分秒)を出力しなさい。  
フォーマットは DATE\_ATOM 定数を使いなさい。  

## (問2) ファイルのread

\_\_FILE\_\_ を使うと「自分自身のファイル」のフルパスを取得することができる。  
\_\_FILE\_\_ のファイルの中身を「全部読みだして、"1行づつ" 出力する」コードを書きなさい。  
「配列としてファイルの中味を取得し、その配列を `var_dump()` で出力する」は、ありとします。  

## (問3) form

以下のHTMLファイルがあるとします。  

```
<!doctype html><!-- q3.html -->
<form action="q3.php" method="POST">
1<input type="text" name="input_1"><br>
2<input type="text" name="input_2"><br>
<br>
<button>送信</button>
</form>
```

入力情報を2つとも取得して出力するコードを書きなさい。  
セキュリティへの配慮がないと減点になります。  

## (問4) リダイレクト

「学校のサイト https://www.tech.ac.jp 」にリダイレクトするコードを書きなさい。  

## (問5) 6時間後の日付

プログラムを実行した瞬間から6時間後の時刻(年月日時分秒)を出力しなさい。  
フォーマットは DATE\_ATOM 定数を使いなさい。  

## (問6) CSVファイルのread

/tmp/users.csv のCSVファイルを「CSVファイルとして」読み込んで出力するコードを書きなさい。  
CSVファイルはSJISなので、出力時にUTF-8に文字コード変換しなさい。

## (問7) 関数

- 関数名: add  
- 引数: 2つ(なんでもよいですが、例えば $i と $j )  
- 処理: 引数の二つの値を加算(足し算)する
- 戻り値: 処理で計算した結果

上述の関数を作成しなさい。  
また、上述の関数を使ったコードを書きなさい。戻り値は `echo` または `var_dump()` で出力しなさい。  

## (問8) 関数と配列

- 関数名: makeUserEntity
- 引数: 2つ(なんでもよいですが、例えば $no と $name)
- 処理: まず空の配列を作る。次に、2つの引数を配列に追加する(結果として、2つの要素を持つ配列が出来る)
- 戻り値: 作成した配列

上述の関数を作成しなさい。  
また、上述の関数に「第一引数に自分の学籍番号」「第二引数に自分の名前」を指定して、戻り値を `var_dump()` するコードを書きなさい。  

## (問9) 関数と時間計算

- 関数名: subHour
- 引数: 1つ
- 処理: 現在時刻から「引数」時間だけ過去の時間を計算: 例えば現在時刻が 2024/01/19 20:00:00 で引数に 2 が指定された時は 2024/01/19 18:00:00 が得られる事
- 戻り値: 計算した過去時間の文字列表現(フォーマットは DATE\_ATOM)

上述の関数を作成しなさい。  
また、上述の関数を使ったコードを書きなさい。戻り値はechoまたはvar\_dump()で出力しなさい。  

## (問10) 関数とif文とリダイレクト

- 関数名: randomRedirect
- 引数: なし
- 処理: 
    + `random_int(1,3)` で、1～3の乱数を作成します
    + 乱数が 1 なら、 Cookieに「名前:locate, 値:google」を設定し、 https://www.google.com にリダイレクト
    + 乱数が 2 なら、 Cookieに「名前:locate, 値:school」を設定し、 https://www.tech.ac.jp にリダイレクト
    + 乱数が 3 なら、 Cookieに「名前:locate, 値:net」を設定し、 https://aws.amazon.com/jp/ にリダイレクト
- 戻り値: なし

上述の関数を作成しなさい。  
また、上述の関数を使ったコードを書きなさい。  

## (問11) 難問: 硬貨の選択

500 円玉を a 枚、100 円玉を b 枚、50 円玉を c 枚持っています。これらの硬貨の中から何枚かを選び、合計金額をちょうど x 円にする方法は何通りあるでしょうか？  
引数に a, b, c, x の4つを取り、戻り値に「何通りあるか」の個数を返す関数を作成しなさい。  
なお、それぞれの数値は以下の制約があるとします。  

- a, b, c ともに 0以上50以下 の整数
- a + b + c は、1以上
- x は、 50 以上 20000 以下、かつ50の倍数
