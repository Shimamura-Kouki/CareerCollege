# 2021年度 前期 期末試験

試験の回答は、以下の通りにすること。

- １問あたり１ファイルに記述。ファイル名は「1-1.txt」でも「問1-1.txt」でも可。フォーマットはtext、拡張子は.txtとする
- 文字コードはUTF-8にすること

試験の注意事項は以下の通り

- 試験なので「周囲との相談」「他人の答案の覗き見」は不許可
- ネット等を使って調べるのは許可
- コードやSQLを勉強用サーバ(dev2.m-fr.net)で確認するのは推奨
- いずれの問題も「書いてある点数」を満点とし、問題があったら適宜減点する

提出は、以下の通り

- 授業内に提出する場合は、Teamsの「前期期末テスト」フォルダの中に「自分の名前のフォルダ」を作成して、そこに回答ファイル一式を提出
- 授業外で提出する場合は「自分の名前のフォルダ」に回答ファイル一式を入れた状態でzip形式で固めて教務経由で提出(提出期限は9/2)

## (問1)クラス: 10点

以下のクラス定義を書きなさい。    
メソッドの中身(処理)は、空っぽのままでよい、とします。「// 処理」のコメント程度を書いておくとよいでしょう。    
メソッドは指定がない限りpublic、プロパティは指定がない限りprivateにしなさい。    

- Hogeクラス
    + getDataメソッド: 引数無し
    + setDataメソッド: 引数一つ
    + validateDataメソッド: 引数無し、protected
    + data プロパティ
    + counter プロパティ

## (問2)ループ処理: 10点

「50回ループ処理」するコードを書きなさい。    
ループの中では、以下の処理を書きなさい。    

- echoで '.'を出力
- random_int()で0-99の範囲の乱数を作成。もし0が出たらループを即時終了

## (問3)推測困難な文字列の作成: 10点

アクティベーションなどで使用可能な「暗号強度のある乱数文字列」を作成しなさい。    
値は192ビット(24バイト)以上とします。また、使いやすいように「ASCII文字だけで構成されている」ようにしなさい。    

## (問4)DB接続: 10点

PDOクラスを使ってDB接続ハンドルを作成しなさい。    
情報は「mysql、localhost、database名はtech、接続アカウントとパスワードはtech」とします。    
なお、PDO接続で「適切なoptionが指定されていない」場合は減点対象とします。    

## (問5)SQL発行: 10点

以下のテーブルに対して情報をINSERT。なお、created_at以外の情報は「外部から入ってきた」ものと仮定して、セキュリティに配慮すること。    
DB接続ハンドルは、問4で作成したコードをrequireするなどしてOKとします。    

INSERTする値は    

- name には自分の名前
- quantity には好きな数値
- created_atには「今」の時間を、PHPまたはMySQLの関数を使用

とします。    

```
CREATE TABLE f_exam (
  f_exam_id SERIAL,
  name VARCHAR(64) NOT NULL DEFAULT '' COMMENT '名前',
  quantity INT NOT NULL COMMENT '数量',
  created_at DATETIME NOT NULL COMMENT 'レコード作成日付',
  PRIMARY KEY(f_exam_id)
)CHARACTER SET 'utf8mb4', ENGINE=InnoDB, COMMENT='テストテーブル';
```

## (問6)文字列の分解と配列の結合: 10点

前提として、以下の変数に以下の値が入っています。    

```
$s1 = '1,2,3';
$s2 = "44\t55\t66";
```

以下の処理を書きなさい。

- $s1は、, で分解して配列にしなさい
- $s2は、\t(タブ) で分解して配列にしなさい
- 上述2つの配列を結合しなさい

結果として、以下の値が得られる事を期待しています。    

```
array(6) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "2"
  [2]=>
  string(1) "3"
  [3]=>
  string(2) "44"
  [4]=>
  string(2) "55"
  [5]=>
  string(2) "66"
}
```

## (問7): 作成物の提出：40点

授業中に作成したものを提出しなさい。    
以下のチェックを行います。    
試験のファイルには「アクセス可能なURI(学校のサーバ( dev2.m-fr.net に限る：DBの中を確認するので)」を記述しなさい。

- TopPage が https://dev2.m-fr.net/アカウント名/AccountBooks2021/ で表示されること
- 会員登録で、エラーの場合に「エラーである事が出力される」「入力が保持される」事 https://dev2.m-fr.net/アカウント名/AccountBooks2021/register.php
- 会員登録が出来ること(アクティベーションまで) https://dev2.m-fr.net/アカウント名/AccountBooks2021/register_fin_print.php
- 会員登録が出来ること(アクティベーション以降) https://dev2.m-fr.net/アカウント名/AccountBooks2021/register_activation.php

なお、インターンなどで授業にあまり出ておらずコードが書けていない人は、以下の救済措置を作成します。    

- 一般的に「1機能(会員登録、パスワード変更、認可処理、等)」と呼ばれるものの、自分で作ったソースコードを4機能分、見せてください

インターン先の場合、DNAなどの問題もあるかと思うので、そのあたり確認をしてから見せるようにしてください。    
また「提出」は原則として難しいと思われるので、最終日(9/7)に個別に確認をします。    
